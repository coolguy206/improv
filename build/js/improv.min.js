var app=angular.module("myApp",["ngRoute"]);app.config(function(a){a.when("/",{controller:"HomeController",templateUrl:"views/home.html"}).when("/shows",{controller:"ShowsController",templateUrl:"views/shows-classes.html"}).otherwise({redirectTo:"/"})});var improvId="155588661156148",token="?access_token=EAAEDcqhSBA8BAHFEjYjofxPwWtjyRP3C1Er8cUorW8dsxVnuP9ZAEdqsT3MKlgTiSugZBsSEdwx0smCKgpiFqkW8n7ocTP3FZBJBTPoqNggTpocf0lD7hEcAPz6J4WemGe55h9AQWyT1B1ko1quUyJpdxAWbmTAeQCsPFrFZAAZDZD",baseURL="https://graph.facebook.com/v2.8/";app.factory("fbEvents",["$http",function(a){return a.get(baseURL+improvId+"/events"+token).success(function(a){return a}).error(function(a){return a})}]),app.factory("fbFeed",["$http",function(a){return a.get(baseURL+improvId+"/feed/"+token+"&fields=message,id,full_picture,story,created_time,source").success(function(a){return a}).error(function(a){return a})}]),app.controller("HomeController",["$scope","fbEvents","fbFeed","$http",function(a,b,c,d){var e=[],f=[],g=[];b.success(function(b){var c=b.data,g=function(a,b,c){var d=a.replace(/ /g,"-");a.indexOf("classes")!==-1||a.indexOf("class")!==-1||a.indexOf("workshop")!==-1?(b.img=c,b.url=d,e.push(b)):(b.img=c,b.url=d,f.push(b))};c.forEach(function(a,b){var c,e=a.id,f=a.name.toLowerCase();d.get(baseURL+e+"/photos"+token).success(function(b){var e=b.data[0].id;d.get(baseURL+e+token+"&fields=images").success(function(b){c=b.images[0].source,g(f,a,c)})})}),a.homeShows=f,a.homeClasses=e}),c.success(function(b){console.log(b);var c=b.data;c.forEach(function(a,b){var c=new Date(a.created_time),d=c.getMonth()+1,e=c.getDate();switch(d){case 1:d="Jan";break;case 2:d="Feb";break;case 3:d="March";break;case 4:d="Apr";break;case 5:d="May";break;case 6:d="June";break;case 7:d="July";break;case 8:d="Aug";break;case 9:d="Sept";break;case 10:d="Oct";break;case 11:d="Nov";break;case 12:d="Dec"}a.date=d+" "+e,g.push(a)}),a.feed=g})}]);